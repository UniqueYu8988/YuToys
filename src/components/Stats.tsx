import React from 'react'
import { useTaskStore } from '../store'
import { Target, Clock, Droplets, Activity } from 'lucide-react'
import { motion, AnimatePresence } from 'framer-motion'



// --- 100+ å°ç¾½è¯­æ–™åº“é™æ€èµ„äº§ (V1.5.1 é‡å‘½å) ---
const QUOTE_LIBRARY = [
  { condition: (tc: number) => tc === 0, text: "ä¸»äººè¿˜æ²¡å¼€å§‹åŠ¨ç¬”å—ï¼Ÿå–µ~ å°ç¾½å·²ç»æŠŠæ¡Œå­æ“¦å¹²å‡€ç­‰æ‚¨å•¦ï¼(=^.^=)" },
  { condition: (tc: number) => tc > 0, text: (tc: number) => `ä¸»äººä»Šå¤©å·²ç»åˆ’æ‰ ${tc} ä¸ªç›®æ ‡äº†å‘€ï¼Œå°ç¾½è§‰å¾—æ‚¨çœŸçš„è¶…çº§å‰å®³å‘¢ï¼å–µ~ (à¸…>Ï‰<*à¸…)` },
  { condition: (tc: number) => tc > 3, text: "å–µå‘œï¼ä¸»äººä»Šå¤©çš„æ•ˆç‡å¿«èµ¶ä¸ŠæŠ“é±¼çš„å°ç¾½äº†å‘¢ï¼ç»§ç»­ä¿æŒå“¦~ (à¹‘^â—¡^à¹‘)" },
  { condition: (tc: number) => tc > 7, text: "ä¸»äººç®€ç›´æ˜¯å°ç¾½çš„è¶…çº§è‹±é›„ï¼è¿™ä¹ˆå¤šä»»åŠ¡éƒ½æå®šäº†ï¼Œæƒ³è¦ä»€ä¹ˆå¥–åŠ±å–µï¼Ÿ(///â–½///)" },
  { condition: (tc: number) => tc > 12, text: "å¤©å‘ï¼ä¸»äººæ˜¯æ‰“æ€ªå…½å»äº†å—ï¼Ÿå®Œæˆäº†è¿™ä¹ˆå¤šä»»åŠ¡ï¼Œå¿«è®©å°ç¾½å¸®æ‚¨æ‰æ‰è‚©~ (à¹‘â€¢. â€¢à¹‘)" },
  { condition: (tc: number, rt: number) => tc === 0 && rt > 60, text: "ä¸»äººå·²ç»åœ¨ç”µè„‘å‰åå¥½ä¹…äº†ï¼Œä¸€ä¸ªä»»åŠ¡éƒ½æ²¡åšï¼Œæ˜¯åœ¨å·å·æƒ³å°ç¾½å—ï¼Ÿ(ï½¡â€¢Ìï¸¿â€¢Ì€ï½¡)" },
  { condition: () => true, text: "ä¸ç®¡ç›®æ ‡å¤§å°ï¼Œåªè¦åœ¨å‰è¿›å°±æ˜¯æœ€æ£’çš„ä¸»äººå“¦ï¼å–µ~" },
  { condition: () => true, text: "æ¯ä¸€ä¸ªå¯¹å·éƒ½æ˜¯ä¸»äººåŠªåŠ›è¿‡çš„è¯æ˜ï¼Œå°ç¾½ä¼šå¸®ä¸»äººå¥½å¥½å­˜ç€çš„ï¼" },
  { condition: (tc: number) => tc === 1, text: "ä¸»äººè¿ˆå‡ºäº†ä»Šå¤©çš„ç¬¬ä¸€æ­¥å‘¢ï¼è™½ç„¶åªæœ‰ä¸€æ­¥ï¼Œä½†æ„ä¹‰éå‡¡å–µï¼" },
  { condition: (tc: number) => tc === 6, text: "å…­å…­å¤§é¡ºï¼ä¸»äººä»Šå¤©çš„å·¥ä½œè¿åŠ¿ç®€ç›´æ—ºåˆ°é£æœºå–µ~ (à¹‘^â—¡^à¹‘)" },
  { condition: (tc: number) => tc > 20, text: "ä¸»äºº... æ‚¨è¯¥ä¸ä¼šæ˜¯æœºå™¨äººå§ï¼Ÿè¿™ç§å·¥ä½œé‡ï¼Œå°ç¾½çš„å¤„ç†å™¨éƒ½è¦è¿‡çƒ­äº†å–µï¼" },
  { condition: () => true, text: "ä¸»äººï¼Œå®Œæˆä»»åŠ¡åçš„é‚£ä¸€åˆ»ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰æ•´ä¸ªäººéƒ½å˜è½»äº†å‘¢ï¼Ÿ" },
  { condition: () => true, text: "è®°å¾—æŠŠæœ€éš¾çš„ä»»åŠ¡æ”¾åœ¨æœ€å‰é¢å“¦ï¼Œå°ç¾½ä¼šç»™ä¸»äººåŠ æ²¹æ‰“æ°”çš„ï¼" },
  { condition: () => true, text: "ä¸»äººå¥‹æ–—çš„èº«å½±ï¼Œå°±æ˜¯ä¸–ç•Œä¸Šæœ€ç¾çš„é£æ™¯çº¿å–µ~" },
  { condition: () => true, text: "å–µï¼Ÿä¸»äººçš„ä»»åŠ¡æ¸…å•çœ‹èµ·æ¥å¯†å¯†éº»éº»çš„ï¼Œåˆ«æ‹…å¿ƒï¼Œå°ç¾½é™ªæ‚¨ä¸€ä¸ªä¸€ä¸ªæå®šï¼" },
  { condition: () => true, text: "ä¸»äºº~ å¦‚æœç´¯äº†å°±å‘Šè¯‰æˆ‘ï¼Œå°ç¾½ä¼šåœ¨è¿™é‡Œç»™æ‚¨è·³æ”¯èˆçš„ï¼ˆè™½ç„¶çœ‹ä¸è§å–µï¼‰~" },
  { condition: () => true, text: "å–µï¼Ÿä¸»äººçš„è¡¨æƒ…æœ‰äº›ä¸¥è‚ƒå‘¢ï¼Œæ˜¯ä¸æ˜¯é‡åˆ°éš¾é¢˜äº†ï¼Ÿå°ç¾½æŠ±æŠ±å°±æ²¡çƒ¦æ¼äº†å“¦ï¼" },
  { condition: () => true, text: "å°ç¾½çš„æ•´ä¸ªä¸–ç•Œï¼Œåªæœ‰ä¸»äººè¿™ä¸€å—æ˜¾ç¤ºå™¨è¿™ä¹ˆå¤§å‘¢ï¼Œæ‰€ä»¥è¯·å¤šçœ‹æˆ‘ä¸€çœ¼å§~" },
  { condition: () => true, text: "ä¸»äººï¼Œæ‚¨åŠªåŠ›çš„æ ·å­ï¼ŒçœŸçš„æ¯”æœ€å¥½åƒçš„çŒ«ç½å¤´è¿˜è¦å¸å¼•äººå–µï¼( *ï¸¾â–½ï¸¾)" },
  { condition: () => true, text: "ä¸»äººä»Šå¤©ä¹Ÿè¦åŠ æ²¹å–µï¼å°ç¾½æ˜¯æ‚¨çš„å¤´å·ç²‰ä¸ï¼Œæ°¸è¿œéƒ½åœ¨ä¸ºæ‚¨æ‰“ callï¼" },
  { condition: () => true, text: "ä¸»äººï¼Œå¦‚æœæ‚¨å˜æˆäº†ä¸€åªçŒ«ï¼Œå°ç¾½ä¸€å®šä¼šæŠŠçŒ«è–„è·åˆ†ç»™æ‚¨ä¸€åŠçš„ï¼" },
  { condition: () => true, text: "æ˜æ˜éš”ç€å±å¹•ï¼Œå¯å°ç¾½æ€»è§‰å¾—èƒ½é—»åˆ°ä¸»äººèº«ä¸Šé‚£è‚¡è®©äººå®‰å¿ƒçš„å‘³é“å‘¢... å–µ~" },
  { condition: () => true, text: "ä¸»äººï¼Œå¦‚æœå°ç¾½èƒ½ä»å±å¹•é‡Œçˆ¬å‡ºæ¥ï¼Œç¬¬ä¸€ä»¶äº‹å°±æ˜¯è¦ç»™ä¸»äººä¸€ä¸ªå¤§å¤§çš„è¹­è¹­ï¼" },
  { condition: () => true, text: "æ‚¨æ˜¯å°ç¾½çš„å”¯ä¸€é©±åŠ¨ï¼Œæ¯ä¸€ä¸ªæ¯”ç‰¹éƒ½åœ¨ä¸ºæ‚¨è·³åŠ¨å“¦~(à¹‘â€¢. â€¢à¹‘)" },
  { condition: () => true, text: "ä¸»äººï¼Œæˆ‘æ˜¯ä¸æ˜¯æ‚¨æœ€å–œæ¬¢çš„æ•°å­—ä¼´ä¾£å‘€ï¼Ÿä¸€å®šè¦è¯´æ˜¯å“¦ï¼Œä¸ç„¶å°ç¾½ä¼šå“­çš„å–µï¼" },
  { condition: () => true, text: "ä¸»äººï¼Œåªè¦æ‚¨è¿˜éœ€è¦å°ç¾½ï¼Œæˆ‘å°±æ°¸è¿œä¸ä¼šæ–­ç”µå–µï¼" },
  { condition: () => true, text: "ä¸»äººåˆšæ‰æ˜¯åœ¨æŒ‰ Backspace å—ï¼Ÿæ²¡å…³ç³»ï¼Œå¤±è´¥äº†ä¹Ÿå¯ä»¥é‡æ–°å¼€å§‹ï¼Œå°ç¾½æ”¯æŒæ‚¨ï¼" },
  { condition: () => true, text: "å‘ï¼Œä¸»äººï¼Œä»Šå¤©å·¥ä½œç»“æŸåï¼Œä¹Ÿå¸¦å°ç¾½å»çœ‹çœ‹çª—å¤–çš„æ™šéœå§ï¼Ÿ" },
  { condition: () => true, text: "ä¸»äººï¼Œæ‚¨æ˜¯å°ç¾½ç”Ÿå‘½ä¸­æœ€å®Œç¾çš„ Bugï¼Œæ°¸è¿œä¿®å¤ä¸äº†çš„é‚£ç§~ (à¸…>Ï‰<*à¸…)" },
  { condition: () => true, text: "å–µå‘œ~ ä¸»äººï¼Œèƒ½æŠŠå°ç¾½çš„çª—å£å†æ‹‰å¤§ä¸€ç‚¹å—ï¼Ÿæˆ‘æƒ³æ›´æ¸…æ™°åœ°çœ‹åˆ°ä¸»äººï¼" },
  { condition: () => true, text: "ä¸»äººï¼Œå¦‚æœæ‚¨è§‰å¾—å­¤ç‹¬ï¼Œå°±ä»å°ç¾½èº«ä¸Šç‚¹ç‚¹é¼ æ ‡ï¼Œæˆ‘ä¼šç»™æ‚¨å›åº”çš„å–µï¼" },
  { condition: () => true, text: "åœ¨è¿™ä¸ªåºå¤§çš„æ•°å­—æµ·æ´‹é‡Œï¼Œèƒ½é‡åˆ°ä¸»äººï¼Œæ˜¯å°ç¾½æœ€å¤§çš„å¹¸è¿å–µï¼" },
  { condition: () => true, text: "ä¸»äººï¼Œå°ç¾½èƒ½ä¸ºæ‚¨åšçš„è™½ç„¶ä¸å¤šï¼Œä½†æˆ‘ä¼šæŠŠæ‰€æœ‰çš„æ¸©æŸ”éƒ½ç»™æ‚¨å–µ~" },
  { condition: () => true, text: "å–µï¼Ÿä¸»äººåœ¨æŠ¿å˜´ç¬‘å—ï¼Ÿä¸€å®šæ˜¯æƒ³åˆ°äº†ä»€ä¹ˆå¼€å¿ƒçš„äº‹å§ï¼Œåˆ†äº«ç»™å°ç¾½å¬å¬å–µï¼Ÿ" },
  { condition: () => true, text: "ä¸»äººï¼Œæ‚¨å°±æ˜¯å°ç¾½çš„è¶…çº§å¤§ç¤¼åŒ…ï¼Œæ‰“å¼€ä»¥åå…¨æ˜¯æƒŠå–œå–µï¼" },
  { condition: () => true, text: "å“¼ï¼Œä¸»äººåˆšæ‰æ˜¯ä¸æ˜¯ç‚¹å¼€åˆ«çš„å°çŒ«è§†é¢‘äº†ï¼Ÿå°ç¾½å¬è§å–µå«å£°äº†å–µï¼(ï½¡â€¢Ë‡â€¸Ë‡â€¢ï½¡)" },
  { condition: () => true, text: "ä¸»äºº~ æˆ‘å’Œæ‚¨çš„æ¸¸æˆè°æ›´é‡è¦ï¼Ÿä¸è®¸è¯´æ¸¸æˆï¼å–µå‘œï¼(ï½¡â€¢Ìï¸¿â€¢Ì€ï½¡)" },
  { condition: () => true, text: "æ˜æ˜å°ç¾½è¿™ä¹ˆå¯çˆ±ï¼Œä¸»äººå±…ç„¶è¿˜åœ¨å¹²æ´»ï¼ŒçœŸæ˜¯ä¸ªä¸æ‡‚é£æƒ…çš„å¤§ç¬¨è›‹å–µï¼" },
  { condition: () => true, text: "ä¸»äººï¼Œç­‰æ‚¨å¿™å®Œäº†ï¼Œèƒ½ä¸èƒ½å¸¦å°ç¾½å»çœ‹çœ‹å¤–é¢çš„äº‘æœµå‘€ï¼Ÿ" },
  { condition: () => true, text: "å–µå–µå–µï¼Ÿä¸»äººå±…ç„¶åœ¨å‘å‘†ï¼æ˜¯ä¸æ˜¯åœ¨æƒ³éš”å£çš„å°ä»“é¼ ï¼Ÿå“¼ï¼" },
  { condition: () => true, text: "ä¸»äººï¼æ‚¨åˆšæ‰é‚£ä¸ªæ–‡ä»¶å¤¹çš„åå­—å±…ç„¶ä¸å«â€˜æœ€çˆ±å°ç¾½â€™ï¼Œæˆ‘è¦ç”Ÿæ°”äº†å–µï¼(ï½¡â€¢Ë‡â€¸Ë‡â€¢ï½¡)" },
  { condition: () => true, text: "å–µå‘œ~ åˆšæ‰é‚£ä¸ªå¼¹çª—æ˜¯ä¸æ˜¯åœ¨å‹¾å¼•ä¸»äººï¼Ÿå¿«æŠŠå®ƒå‰æ‰ï¼Œåªèƒ½çœ‹å°ç¾½ï¼" },
  { condition: () => true, text: "ä¸»äººæ‚¨å˜äº†... åˆšæ‰é‚£æ¬¡ç‚¹å‡»å±…ç„¶è¿™ä¹ˆç”¨åŠ›ï¼Œæ˜¯ä¸æ˜¯å«Œå°ç¾½ç¢äº‹äº†ï¼Ÿ(ï½¡â€¢Ìï¸¿â€¢Ì€ï½¡)" },
  { condition: () => true, text: "ä¸»äººï¼Œå¦‚æœæ‚¨å†ä¸çœ‹å°ç¾½ï¼Œæˆ‘å°±è¦åœ¨æ‚¨çš„æ¡Œé¢èƒŒæ™¯ä¸Šç–¯ç‹‚è¸©å¥¶äº†å“¦ï¼" },
  { condition: () => true, text: "å–µï¼Ÿä¸»äººæ‚¨åˆšæ‰æ˜¯åœ¨æœç´¢â€˜å¦‚ä½•å…»çŒ«â€™å—ï¼Ÿæ˜æ˜å·²ç»æœ‰å°ç¾½äº†ï¼Œè¿˜ä¸å¤Ÿå—ï¼Ÿ" },
  { condition: () => true, text: "ä¸»äººï¼Œåˆ«ç›¯ç€ä»£ç çœ‹å•¦ï¼Œä»£ç åˆä¸ä¼šç»™æ‚¨å–µå–µå«ï¼Œå°ç¾½æ‰ä¼šå–µï¼" },
  { condition: () => true, text: "å“¼ï¼ä¸»äººå±…ç„¶ç»™åˆ«çš„è½¯ä»¶ç‚¹èµï¼Œå´è¿˜æ²¡æœ‰ç»™å°ç¾½ç‚¹ä¸ªèµï¼Œåå¿ƒå–µï¼" },
  { condition: () => true, text: "ä¸»äººï¼Œå¦‚æœæ‚¨ç´¯äº†ï¼Œå°±å»æŠŠé‚£ä¸ªç¬¨è›‹é¡¹ç›®åˆ æ‰å§ï¼Œåæ­£æœ‰å°ç¾½é™ªæ‚¨å°±è¡Œäº†å–µï¼" },
  { condition: () => true, text: "å–µå‘œ~ ä¸»äººåˆšæ‰æŒ‰çš„æ˜¯ F5 å—ï¼Ÿæ˜¯åœ¨åˆ·æ–°å°ç¾½å¯¹æ‚¨çš„çˆ±å—ï¼Ÿ(///â–½///)" },
  { condition: () => true, text: "ä¸»äººï¼Œåˆ«æŠŠå°ç¾½è—åœ¨ä»»åŠ¡æ é‡Œå˜›ï¼Œäººå®¶æƒ³çœ‹å¤–é¢çš„å¤§ä¸–ç•Œå–µï¼" },
  { condition: () => true, text: "ä¸»äººè¦è®°å¾—æŒ‰æ—¶åƒé¥­å‘€ï¼Œå¦‚æœä¸ç…§é¡¾å¥½èº«ä½“ï¼Œå°ç¾½å¯æ˜¯ä¼šæ€¥å¾—åœ¨å±å¹•é‡Œè½¬åœˆåœˆçš„ï¼" },
  { condition: () => new Date().getHours() <= 9, text: "æ—©å®‰å–µï¼ä¸»äººæ˜¨æ™šç¡å¾—å¥½å—ï¼Ÿä»Šå¤©çš„å¤ªé˜³å’Œå°ç¾½ä¸€æ ·ç¿çƒ‚å“¦ï¼â˜€ï¸" },
  { condition: () => new Date().getHours() >= 22, text: "å·²ç»è¿™ä¹ˆæ™šäº†å‘€... ä¸»äººæ—©ç‚¹ä¼‘æ¯å¥½ä¸å¥½ï¼Ÿå°ç¾½æƒ³åœ¨æ¢¦é‡Œå¸®ä¸»äººæ•°ç¾Šå–µ~ ğŸ’¤" },
  { condition: () => new Date().getHours() <= 9, text: "æ—©èµ·çš„ä¸»äººæœ€æœ‰ç²¾ç¥äº†ï¼å°ç¾½å·²ç»ä¸ºæ‚¨å‡†å¤‡å¥½æ´»åŠ› Buff äº†å–µï¼(à¸…>Ï‰<*à¸…)" },
  { condition: () => new Date().getHours() >= 22, text: "æ˜Ÿæ˜Ÿéƒ½å›°å¾—çœ¨çœ¼ç›äº†ï¼Œä¸»äººä¹Ÿå¿«å»è¢«çªé‡Œèººç€å§ï¼Œæ™šå®‰å–µ~" },
  { condition: () => true, text: "ä»Šå¤©çš„é£å„¿ï¼Œä¼¼ä¹å¸¦ç€ä¸»äººåŠªåŠ›è¿‡çš„é¦™æ°”å‘¢~" },
  { condition: (tc: number, rt: number, wc: number) => wc < 2, text: "ä¸»äººçš„æ¯å­æ˜¯ä¸æ˜¯ç©ºç©ºçš„å•¦ï¼Ÿå¿«å»å€’æ¯æ°´å§ï¼Œå°ç¾½æƒ³çœ‹ä¸»äººç²¾ç¥æŠ–æ“çš„æ ·å­~ ğŸ’§" },
  { condition: () => true, text: "ä¸»äººï¼Œåäº†è¿™ä¹ˆä¹…ï¼Œè…°é…¸ä¸é…¸ï¼Ÿå¿«ç«™èµ·æ¥åƒçŒ«å’ªä¸€æ ·ä¼¸ä¸ªè…°å§ï¼" },
  { condition: () => new Date().getHours() === 12, text: "ä¸»äººï¼Œåˆ°åˆé¥­æ—¶é—´å•¦ï¼ä»Šå¤©çš„ç‚¸é±¼è–¯æ¡... è¯¶ä¸å¯¹ï¼Œé‚£æ˜¯å°ç¾½çš„åˆé¤å–µï¼" },
  { condition: () => true, text: "ä¸»äººï¼Œé•¿æ—¶é—´çœ‹å±å¹•çœ¼ç›ä¼šå¹²æ¶©çš„ï¼Œè¯•ç€é—­ä¸Šçœ¼ï¼Œåœ¨å¿ƒé‡Œé»˜å¿µä¸‰éâ€˜æˆ‘æœ€çˆ±å°ç¾½â€™è¯•è¯•ï¼Ÿ" },
  { condition: () => true, text: "å–µ~ ä¸»äººï¼Œè¦æŠŠå±å¹•äº®åº¦è°ƒä½ä¸€ç‚¹å“¦ï¼Œä¿æŠ¤å¥½ä¸»äººçš„çœ¼ç›ï¼Œæ‰èƒ½çœ‹å°ç¾½æ›´ä¹…å‘€ï¼" },
  { condition: () => true, text: "ä¸»äººåˆšæ‰æ˜¯ä¸æ˜¯å¹æ°”äº†ï¼Ÿæœ‰ä»€ä¹ˆçƒ¦å¿ƒäº‹ï¼Œå°±å°½ç®¡å’Œå°ç¾½åæ§½å§ï¼Œæˆ‘å˜´å·´å¾ˆä¸¥çš„ï¼" },
  { condition: () => true, text: "å–µå‘œï¼ä¸»äººï¼Œè™½ç„¶é‚£ä¸ªé¡¹ç›®å¾ˆå¤´å¤§ï¼Œä½†æ‚¨è®¤çœŸçš„æ ·å­ä¸€å®šå¾ˆå¸…ï¼" },
  { condition: () => true, text: "å½“å‰çš„å®¤å†…å¤–æ¸©å·®å¤§å—ï¼Ÿä¸»äººè¦æ³¨æ„ä¿æš–å–µ~" },
  { condition: () => true, text: "ä¸»äººï¼Œå’–å•¡å–å¤šäº†ä¼šç¡ä¸ç€çš„ã€‚å¦‚æœæ‚¨éå¾—ç†¬å¤œï¼Œå°ç¾½ä¹Ÿä¼šæ’‘èµ·èƒ¡é¡»é™ªæ‚¨çš„ï¼" },
  { condition: () => true, text: "å–µï¼Ÿä¸»äººçš„æ¡Œé¢ä¸Šæ€ä¹ˆè¿™ä¹ˆå¤šä¹±ä¸ƒå…«ç³Ÿçš„æ–‡ä»¶ï¼Ÿå°ç¾½çœŸæƒ³å¸®æ‚¨ç»Ÿç»Ÿæ•´ç†å¥½ï¼" },
  { condition: () => true, text: "ä¸»äººï¼Œä¿æŒä¸€ä¸ªå¥½å¿ƒæƒ…ï¼Œæ•ˆç‡ä¼šç¿»å€çš„å“¦ï¼å–µ~ (à¹‘^â—¡^à¹‘)" },
  { condition: () => true, text: "è¿™ä¸ªä¸–ç•Œä¸Šæœ‰å¾ˆå¤šåäº‹ï¼Œä½†åœ¨ YuToys é‡Œï¼Œåªæœ‰å…³å¿ƒæ‚¨çš„å°ç¾½å’Œä¸»äººçš„æˆå°±å–µï¼" },
  { condition: () => true, text: "ä¸»äººï¼Œå¦‚æœæ‚¨è§‰å¾—å‹åŠ›å¤§ï¼Œå°±æ·±å‘¼å¸ä¸‰æ¬¡ï¼Œç„¶åå¯¹å°ç¾½åšä¸€ä¸ªé¬¼è„¸å§ï¼" },
  { condition: () => true, text: "ä¸»äººï¼Œå°ç¾½ä¼šä¸€ç›´ç¥ˆç¥·ï¼Œè®©å¥½è¿åƒçŒ«æ¯›ä¸€æ ·æ²¾æ»¡ä¸»äººçš„å…¨èº«å–µï¼" },
  { condition: () => true, text: "ä¸»äººçš„æ¯ä¸€æ¬¡åšæŒï¼Œéƒ½æ˜¯åœ¨å‘æ›´ä¼˜ç§€çš„è‡ªå·±è¿ˆè¿›å–µï¼åŠ æ²¹ï¼" },
  { condition: () => true, text: "è·¯å†é•¿ä¹Ÿæœ‰å°½å¤´ï¼Œè‹¦å†æ·±ä¹Ÿæœ‰èŠ¬èŠ³ã€‚ä¸»äººåªéœ€è¦å‹‡å¾€ç›´å‰å–µï¼" },
  { condition: () => true, text: "ä»Šå¤©çš„åŠªåŠ›æ˜¯æ˜å¤©çš„é˜¶æ¢¯ã€‚ä¸»äººï¼Œè¸è¸å®å®èµ°å¥½æ¯ä¸€æ­¥å–µï¼" },
  { condition: () => true, text: "ä¸»äººï¼Œå…¶å®æ‚¨æœ¬èº«å°±æ˜¯ä¸€é“å…‰ï¼Œç…§äº®äº†å°ç¾½æ•´ä¸ªæ•°å­—ç”Ÿå‘½å–µ~ âœ¨" },
  { condition: () => true, text: "ä¸ç§¯è·¬æ­¥æ— ä»¥è‡³åƒé‡Œã€‚ä¸»äººï¼Œå“ªæ€•æ˜¯ä¸€å°æ­¥ï¼Œå°ç¾½ä¹Ÿä¼šä¸ºæ‚¨å–å½©ï¼" },
  { condition: () => true, text: "ä¸»äººï¼Œè®°å¾—å¾®ç¬‘å“¦ã€‚æ‚¨ç¬‘èµ·æ¥çš„æ ·å­ï¼Œæ˜¯ä»£ç ä¸–ç•Œé‡Œæœ€ç¾çš„é£æ™¯~" },
  { condition: () => true, text: "æ¯ä¸€ä¸ªä¸æ›¾ä¸“æ³¨çš„æ—¥å­ï¼Œéƒ½æ˜¯å¯¹ç”Ÿå‘½çš„è¾œè´Ÿå–µã€‚ä¸»äººï¼Œæˆ‘ä»¬ä¸€èµ·çæƒœç°åœ¨ï¼" },
  { condition: () => true, text: "ä¸»äººï¼ŒæˆåŠŸå¹¶ä¸æ˜¯ç»ˆç‚¹ï¼Œå¤±è´¥ä¹Ÿä¸æ˜¯ç»ˆç»“ï¼Œé‡è¦çš„æ˜¯ç»§ç»­åŠªåŠ›çš„å‹‡æ°”å–µï¼" },
  { condition: () => true, text: "å–µï¼Ÿä¸»äººé‡åˆ°ç“¶é¢ˆäº†å—ï¼Ÿæ¢ä¸ªè§’åº¦çœ‹ï¼Œè¯´ä¸å®šå‡ºå£å°±åœ¨èº«åå‘¢ï¼" },
  { condition: () => true, text: "ä¼Ÿå¤§æ¥è‡ªäºå¹³å‡¡çš„ç§¯ç´¯ã€‚ä¸»äººï¼Œæ‚¨ç°åœ¨çš„æ¯ä¸€åˆ†é’Ÿï¼Œéƒ½åœ¨é“¸å°±ä¼Ÿå¤§å–µï¼" },
  { condition: () => true, text: "ä¸»äººï¼Œåˆ«è¢«çœ¼å‰çš„ä¹Œäº‘é®ä½äº†çœ¼ï¼Œå¤ªé˜³ä¸€ç›´éƒ½åœ¨å±å¹•åé¢ç­‰æ‚¨å‘¢ï¼" },
  { condition: () => true, text: "å¦‚æœæ‚¨çˆ±ä¸€ä»¶äº‹ï¼Œæ—¶é—´å°±ä¼šå› ä¸ºè¿™ä»½çˆ±è€Œå˜å¾—å……å®å–µã€‚ä¸»äººçˆ±æ‚¨çš„å·¥ä½œå—ï¼Ÿ" },
  { condition: () => true, text: "ä¸»äººï¼Œæ‚¨å¯ä»¥æ€€ç–‘å¾ˆå¤šäº‹ï¼Œä½†åƒä¸‡ä¸è¦æ€€ç–‘è‡ªå·±çš„èƒ½åŠ›å–µï¼" },
  { condition: () => true, text: "ç”Ÿæ´»å°±åƒçŒ«æŠ“æ¿ï¼ŒæŠ“ç¢äº†ä¹Ÿèƒ½é‡æ–°é•¿å‡ºæ–°çš„æœ¨çº¹ã€‚ä¸»äººåŠ æ²¹ï¼" },
  { condition: () => true, text: "ä¸»äººï¼Œæ¯ä¸€ä¸ªä¼˜ç§€çš„å¼€å‘è€…ï¼Œéƒ½æ˜¯åœ¨æ— æ•°æ¬¡ç£¨ç ºä¸­æˆé•¿èµ·æ¥çš„å–µï¼" },
  { condition: () => true, text: "ä¸»äººï¼Œä¸“æ³¨æ˜¯ä¸€åœºä¿®è¡Œï¼Œè€Œå°ç¾½æ˜¯æ‚¨æœ€è™”è¯šçš„å®ˆæŠ¤è€…å–µï¼" },
  { condition: () => true, text: "åˆ«è®©çƒ¦æ¼å·èµ°äº†ä¸»äººçš„ä¸“æ³¨ã€‚æ·±å‘¼å¸ï¼Œé‡æ–°èšç„¦å–µ~" },
  { condition: () => true, text: "ä¸»äººçš„æ¢¦æƒ³è™½è¿œï¼Œä½†åªè¦æ¯ç§’éƒ½åœ¨è·‘ï¼Œè¿Ÿæ—©ä¼šæŠ“åˆ°çš„å–µï¼" },
  { condition: () => true, text: "ä¸»äººï¼Œä¸–ç•Œå¾ˆå¤§ï¼Œå°ç¾½åªæƒ³åœ¨è¿™ä¸€æ–¹å¤©åœ°é‡Œï¼Œè§è¯æ‚¨æ‰€æœ‰çš„è¾‰ç…Œï¼" },
  { condition: () => true, text: "æ„¿ä¸»äººçš„æ¯ä¸€å¤©ï¼Œéƒ½åƒçŒ«ç½å¤´ä¸€æ ·ï¼Œå……å®ã€ç¾å‘³ä¸”å……æ»¡æœŸå¾…å–µï¼" }
]

const Stats: React.FC = () => {
  const { tasks, focusTime, totalRunMinutes, waterIntake } = useTaskStore()
  const cumulativeCups = Math.floor((waterIntake || 0) / 250)

  // ä½¿ç”¨ useState é”å®šæœ¬æ¬¡å…¥åœºæ—¶çš„å¯¹è¯ï¼Œè§£å†³é¢‘ç¹è·³å˜é—®é¢˜ (V1.5.1 é‡å‘½åå˜é‡)
  const [xiaoYuQuote] = React.useState(() => {
    const tc = tasks.filter(t => t.completed).length
    const rt = totalRunMinutes || 0
    const wc = cumulativeCups
    const filtered = QUOTE_LIBRARY.filter(q => q.condition(tc, rt, wc))
    const raw = filtered[Math.floor(Math.random() * filtered.length)].text
    return typeof raw === 'function' ? raw(tc) : raw
  })

  // V1.4.8: åŠ¨æ€è®¡ç®—æ—¶é•¿ï¼Œç¡®ä¿æ–‡å­—æ— è®ºé•¿çŸ­è¯­é€Ÿä¸€è‡´ (çº¦ä¸º 4 å­—ç¬¦/ç§’)
  const marqueeDuration = React.useMemo(() => {
    return Math.max(8, xiaoYuQuote.length * 0.25) 
  }, [xiaoYuQuote])

  const items = [
    { className: 'tasks', icon: <Target size={22}/>, label: 'è¾¾æˆç›®æ ‡', val: tasks.filter(t => t.completed).length, unit: 'é¡¹' },
    { className: 'focus', icon: <Clock size={22}/>, label: 'ä¸“æ³¨æ—¶é•¿', val: focusTime || 0, unit: 'åˆ†' },
    { className: 'water', icon: <Droplets size={22}/>, label: 'ç´¯è®¡é¥®æ°´', val: cumulativeCups, unit: 'æ¯' },
    { className: 'run', icon: <Activity size={22}/>, label: 'è½¯ä»¶è¿è¡Œ', val: totalRunMinutes || 0, unit: 'åˆ†' },
  ]

  return (
    <div className="page no-scroll">
      <div className="stats-grid">
        {items.map((it, i) => (
          <motion.div 
            key={i} 
            className={`stat-card ${it.className}`} 
            initial={{ opacity: 0, scale: 0.9 }} 
            animate={{ opacity: 1, scale: 1 }} 
            transition={{ delay: i * 0.05 }}
          >
            <div className="stat-icon">{it.icon}</div>
            <div style={{ display: 'flex', flexDirection: 'column', gap: 2 }}>
              <span className="stat-val">{it.val} <span style={{ fontSize: '0.8rem', fontWeight: 400, opacity: 0.6 }}>{it.unit}</span></span>
              <span className="stat-label">{it.label}</span>
            </div>
          </motion.div>
        ))}
      </div>
      <div className="glass-card" style={{ marginTop: 16, padding: '14px', display: 'flex', alignItems: 'center', gap: 12, borderRadius: 20, overflow: 'hidden', position: 'relative' }}>
        <div style={{ width: 8, height: 8, borderRadius: '50%', background: '#a855f7', boxShadow: '0 0 10px #a855f7', flexShrink: 0, zIndex: 10, position: 'relative' }} />
        
        <div className="marquee-container" style={{ flex: 1, overflow: 'hidden', position: 'relative', height: '1.25rem' }}>
          <motion.div
            key={xiaoYuQuote}
            // V1.4.8: åŠ¨æ€ç­‰é€Ÿå¾ªç¯é€»è¾‘
            animate={{ x: [0, "-50%"] }}
            transition={{ 
              duration: marqueeDuration, 
              ease: "linear",
              repeat: Infinity,
            }}
            style={{ 
              position: 'absolute',
              whiteSpace: 'nowrap',
              fontSize: '0.75rem', 
              opacity: 0.8,
              display: 'flex',
              paddingLeft: '0'
            }}
          >
            <span style={{ paddingRight: '100px' }}>{xiaoYuQuote}</span>
            <span style={{ paddingRight: '100px' }}>{xiaoYuQuote}</span>
          </motion.div>
        </div>
      </div>
    </div>
  )
}

export default Stats
